<head>
    <title>todo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
</body>

<template name="main">
    <!-- {{#unless currentUser}} REMOVE
        {{> loginButtons }}
    {{else}} -->
    <div class="container page">
        {{> add_new}}
        {{> list_tasks}}
    </div>

    <div class="qm-pop">
        <h1>Keyboard Shortcuts</h1>
        <table>
            <h2>Utilities</h2>
            <tr><td><kbd>?</kbd></td><td>Show this dialog</td></tr>
            <h2>Navigation</h2>
            <tr><td><kbd>j</kbd></td><td>Next item</td></tr>
            <tr><td><kbd>k</kbd></td><td>Previous item</td></tr>
            <tr><td><kbd>v</kbd></td><td>Expand current item</td></tr>
            <tr><td><kbd>V</kbd></td><td>Contract all items</td></tr>
            <h2>Actions</h2>
            <tr><td><kbd>#</kbd></td><td>Delete current item</td></tr>
            <tr><td><kbd>ctrl</kbd>+<kbd>enter</kbd></td><td>Mark current item as completed</td></tr>
            <tr><td><kbd>n</kbd> or <kbd>c</kbd></td><td>New item</td></tr>
            <tr><td><kbd>*</kbd></td><td>Toggle visibility of completed items</td></tr>
            <tr><td><kbd>|</kbd></td><td>Archive completed tasks</td></tr>
            <tr><td><kbd>m t</kbd></td><td>Change Due-Date to today</td></tr>
            <tr><td><kbd>e w</kbd></td><td>Mark as 'waiting' (blocked).</td></tr>

        </table>
    </div>
    {{> command_bar}}
    <!-- {{/unless}} -->
</template>

<template name="add_new">
    <div class="row">
        <input class="input col m6 s12 add-new mousetrap" type="text" placeholder="(n)">
        <input class="input col m6 s12 search mousetrap" type="text" placeholder="(/)">
    </div>
    <div class="row suggestions-container">
        <table class="suggestions">
            {{#each suggestions}}
                {{>show_suggestion}}
            {{/each}}
        </table>
    </div>
</template>

<template name="show_suggestion">
    <tr data-sugg-id="{{_id}}"><td>{{text}}</td></tr>
</template>

<template name="list_tasks">
    <div class="row">
        <div class="col s12">
            <ul class="collapsible">
                {{#each today_tasks}}
                    {{> show_task_row}}
                {{/each}}
            </ul>
            <span class="rule">This Week</span>
            <ul class="collapsible">
                {{#each this_week_tasks}}
                    {{> show_task_row}}
                {{/each}}
            </ul>
            <span class="rule">The Future</span>
            <ul class="collapsible">
                {{#each future_tasks}}
                    {{> show_task_row}}
                {{/each}}
            </ul>
            <!-- <table class="table table-hover">
                <thead>
                </thead>
                <tbody>
                    {{#each today_tasks}}
                        {{> show_task_row}}
                    {{/each}}
                    <tr class="rule"><td colspan="2"><span class="rule-today">This Week</span></td></tr>
                    {{#each this_week_tasks}}
                        {{> show_task_row}}
                    {{/each}}
                    <tr class="rule"><td colspan="2"><span class="rule-today">The Future</span></td></tr>
                    {{#each future_tasks}}
                        {{> show_task_row}}
                    {{/each}}
                </tbody>
            </table> REMOVE-->
        </div>
    </div>
</template>

<template name="show_task_row">
    <li>
        <div class="collapsible-header">
          <div class="row task-row {{complete_to_bool}} hard-{{hard}} overdue-{{overdue}}">
              <div class="col s8">
                  <span class="title col s12"><span class="drop-down"><i class="glyphicon glyphicon-th-large drop-down"></i></span> {{{text_html}}}</span>
              </div>
              <div class="col s4 text-right">
                  <small>{{complete_string}} </small><i class="complete-indicator dont-collapse glyphicon glyphicon-{{complete_to_class}}"></i>
              </div>
          </div>
        </div>
        <div class="collapsible-body">
          <div class="row">
                  <div class="col m6 well">
                      <div class="row due-buttons">
                          <input class="input input-sm duedate col s12" type="text" placeholder="Due Date (d)" value="{{due}}" />
                          <hr>

                          <a href="javascript://" class="btn btn-default btn-sm one-hour col s4"><i class="glyphicon glyphicon-calendar"></i> One Hour</a>
                          <a href="javascript://" class="btn btn-default btn-sm two-hours col s4"><i class="glyphicon glyphicon-calendar"></i> Two Hours</a>
                          <a href="javascript://" class="btn btn-default btn-sm five-hours col s4"><i class="glyphicon glyphicon-calendar"></i> Five Hours</a>

                          <a href="javascript://" class="btn btn-default btn-sm one-day col s4"><i class="glyphicon glyphicon-calendar"></i> One Day</a>
                          <a href="javascript://" class="btn btn-default btn-sm two-days col s4"><i class="glyphicon glyphicon-calendar"></i> Two Days</a>
                          <a href="javascript://" class="btn btn-default btn-sm five-days col s4"><i class="glyphicon glyphicon-calendar"></i> Five Days</a>
                      </div>
                      <div class="row">
                          <div class="col s12">
                              <b>People</b>
                              <div class="well">
                                  {{#each task_association_people}}
                                      {{> person_contact_sheet}}
                                  {{/each}}
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="col m1"></div>
                  <div class="col m5 well">
                      <a href="javascript://" class="btn btn-xs btn-danger delete-task"><i class="glyphicon glyphicon-remove"></i> Delete (#)</a>
                      <hr>
                      <div class="task-description" contenteditable>{{{description}}}</div>
                  </div>
          </div>
        </div>
    </li>
    <!-- <tr class="task-row {{complete_to_bool}} hard-{{hard}} overdue-{{overdue}}" data-id="{{_id}}"> REMOVE
        <td>
            <div class="row">
                <div class="col s8">
                    <span class="title col s12"><span class="drop-down"><i class="glyphicon glyphicon-th-large drop-down"></i></span> {{{text_html}}}</span>
                </div>
                <div class="col s4 text-right">
                    <small>{{complete_string}} </small><i class="complete-indicator glyphicon glyphicon-{{complete_to_class}}"></i>
                </div>
            </div>
            <div class="row">
                <div class="col s12 collapsible" data-collapsible="accordion">
                    <br>
                    <div class="col m6 well">
                        <div class="row due-buttons">
                            <input class="input input-sm duedate col s12" type="text" placeholder="Due Date (d)" value="{{due}}" />
                            <hr>

                            <a href="javascript://" class="btn btn-default btn-sm one-hour col s4"><i class="glyphicon glyphicon-calendar"></i> One Hour</a>
                            <a href="javascript://" class="btn btn-default btn-sm two-hours col s4"><i class="glyphicon glyphicon-calendar"></i> Two Hours</a>
                            <a href="javascript://" class="btn btn-default btn-sm five-hours col s4"><i class="glyphicon glyphicon-calendar"></i> Five Hours</a>

                            <a href="javascript://" class="btn btn-default btn-sm one-day col s4"><i class="glyphicon glyphicon-calendar"></i> One Day</a>
                            <a href="javascript://" class="btn btn-default btn-sm two-days col s4"><i class="glyphicon glyphicon-calendar"></i> Two Days</a>
                            <a href="javascript://" class="btn btn-default btn-sm five-days col s4"><i class="glyphicon glyphicon-calendar"></i> Five Days</a>
                        </div>
                        <div class="row">
                            <div class="col s12">
                                <b>People</b>
                                <div class="well">
                                    {{#each task_association_people}}
                                        {{> person_contact_sheet}}
                                    {{/each}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col m1"></div>
                    <div class="col m5 well">
                        <a href="javascript://" class="btn btn-xs btn-danger delete-task"><i class="glyphicon glyphicon-remove"></i> Delete (#)</a>
                        <hr>
                        <div class="task-description" contenteditable>{{{description}}}</div>
                    </div>
                </div>
            </div>
        </td>
    </tr> -->
</template>

<template name="person_contact_sheet">
    <b>{{text}}</b>
    <p>
    {{#if primary_email}}
        <a href="mailto:{{primary_email}}" target="_blank">Email</a>
    {{else}}
        <input class="email-input input" type="email" placeholder="{{text}}'s Email">
    {{/if}}
    </p>
    <p>
    {{#if primary_phone}}
        <a href="#" target="_blank">SMS</a>
    {{else}}
        <input class="phone-input input" type="number" placeholder="{{text}}'s Phone Number">
    {{/if}}
    </p>
    <p>
    {{#if primary_facebook}}
        <a href="https://www.facebook.com/messages/{{primary_facebook}}" target="_blank">Facebook ({{primary_facebook}})</a>
    {{else}}
        <input class="facebook-input input" type="text" placeholder="{{text}}'s Facebook">
    {{/if}}
    </p>
</template>
